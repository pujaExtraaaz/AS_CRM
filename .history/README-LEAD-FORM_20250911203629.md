# Lead Form API Implementation

This document provides instructions for implementing the lead form API in your website.

## Overview

We've implemented an API endpoint that allows capturing leads from various forms on your website. The API handles different form types and stores the data in the CRM system.

## API Endpoint

**URL:** `/api/leads/form`  
**Method:** `POST`  
**Content-Type:** `application/json`

## Implementation Steps

### 1. Backend Setup (Already Completed)

- Created a LeadFormController to handle form submissions
- Added API routes in `routes/api.php`
- Created tests to ensure the API works correctly

### 2. Frontend Implementation

To integrate your website forms with the API, follow these steps for each form:

#### For ContactModal.jsx:

```jsx
// Add this to your form submission handler
const handleSubmit = async (event) => {
  event.preventDefault();
  
  try {
    const response = await fetch('/api/leads/form', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        name: formData.name,
        email: formData.email,
        phone: formData.phone,
        message: formData.message,
        businessType: formData.businessType,
        formType: 'contact'
      }),
    });
    
    const result = await response.json();
    
    if (result.status === 'success') {
      // Show success message to the user
      setSuccessMessage('Thank you for your submission!');
      resetForm();
    } else {
      // Handle errors
      setErrorMessage(result.message);
    }
  } catch (error) {
    console.error('Error submitting form:', error);
    setErrorMessage('An error occurred. Please try again later.');
  }
};
```

#### For GrowthBlueprint.jsx:

```jsx
// Add this to your form submission handler
const handleSubmit = async (event) => {
  event.preventDefault();
  
  try {
    const response = await fetch('/api/leads/form', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        name: formData.name,
        email: formData.email,
        phone: formData.phone,
        businessType: formData.businessType,
        formType: 'blueprint'
      }),
    });
    
    // Handle response as above
  } catch (error) {
    // Handle error
  }
};
```

#### For Contact.jsx:

```jsx
// Add this to your form submission handler
const handleSubmit = async (event) => {
  event.preventDefault();
  
  try {
    const response = await fetch('/api/leads/form', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        name: formData.name,
        email: formData.email,
        mobile: formData.mobile,
        location: formData.location,
        business: formData.business,
        message: formData.message,
        captchaInput: formData.captchaInput,
        formType: 'contact'
      }),
    });
    
    // Handle response
  } catch (error) {
    // Handle error
  }
};
```

#### For BecomePartner.jsx:

```jsx
// Add this to your form submission handler
const handleSubmit = async (event) => {
  event.preventDefault();
  
  try {
    const response = await fetch('/api/leads/form', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        fullName: formData.fullName,
        email: formData.email,
        mobile: formData.mobile,
        cityState: formData.cityState,
        applyingFor: formData.applyingFor,
        businessBackground: formData.businessBackground,
        message: formData.message,
        formType: 'partner'
      }),
    });
    
    // Handle response
  } catch (error) {
    // Handle error
  }
};
```

### 3. Required Fields

Each form submission must include:

- `name` or `fullName` (string)
- `email` (string)
- `formType` (string): 'contact', 'partner', or 'blueprint'

### 4. Testing

To test the API endpoint, you can use tools like Postman or curl:

```bash
curl -X POST \
  http://yourdomain.com/api/leads/form \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "Test User",
    "email": "test@example.com",
    "phone": "1234567890",
    "message": "This is a test message",
    "businessType": "Testing",
    "formType": "contact"
}'
```

### 5. Viewing Leads in CRM

Once a lead is submitted through the API, it will appear in your CRM system under the Leads section. You can access it through:

1. Log in to your CRM dashboard
2. Navigate to "Leads" in the sidebar
3. The new leads will appear in the list with a status of "New"

## Detailed Documentation

For more detailed information about the API, including all available fields and response formats, please refer to the [Lead Form API Documentation](resources/docs/lead-form-api.md).

## Support

If you encounter any issues implementing this API, please contact the development team. 